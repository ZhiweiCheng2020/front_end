<!DOCTYPE html>
<html>
<head>
    <title>Upload Data</title>
    <style>
        /* Add some basic styling */
        #progress {
            margin-top: 20px;
            border: 1px solid #ddd;
            padding: 10px;
            width: 300px;
            color: #333;
        }
    </style>
</head>
<body>
    <h2>Upload Data</h2>
    <form action="/upload" method="POST" enctype="multipart/form-data">
        <input type="file" name="file" />
        <button type="submit">Upload and Analyze</button>
    </form>

    <!-- Progress Updates -->
    <div id="progress">Progress updates will appear here...</div>

    <script>
        // Establish a connection to the SSE endpoint
        var evtSource = new EventSource("/progress");
        
        // Listen for messages
        evtSource.onmessage = function(e) {
            // Parse the incoming message as JSON
            var data = JSON.parse(e.data);

            // Update the progress div with the new message
            document.getElementById("progress").innerText = data.message || 'Processing...';
            
            // If the progress indicates completion, you may wish to close the connection
            if (data.complete) {
                evtSource.close();
                document.getElementById("progress").innerText += "\nAnalysis Complete!";
            }
        };
    </script>
</body>
</html>
